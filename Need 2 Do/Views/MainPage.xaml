<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NotasApp.Views.MainPage"
             Title="Mis Notas"
             BackgroundColor="#F0F0F0">

    <Grid Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Título superior -->
        <Label Text="Notas"
               FontSize="32"
               FontAttributes="Bold"
               TextColor="Black"
               Margin="10,0"
               Grid.Row="0"/>

        <!-- Lista de notas -->
        <CollectionView x:Name="NotasCollection"
                SelectionMode="Single"
                SelectionChanged="OnNotaSeleccionada">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="6"
                   Padding="12"
                   CornerRadius="16"
                   HasShadow="True"
                   BackgroundColor="White">
                        <Grid ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <!-- Contenido de la nota -->
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding Titulo}"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="Black" />
                                <Label Text="{Binding FechaCreacion, StringFormat='{0:dd MMM yyyy HH:mm}'}"
                               FontSize="12"
                               TextColor="Gray" />
                            </VerticalStackLayout>

                            <!-- Botones -->
                            <HorizontalStackLayout Grid.Column="1"
                                           VerticalOptions="Center"
                                           Spacing="6">
                                <Button Text="✏"
                                FontSize="14"
                                HeightRequest="36"
                                WidthRequest="36"
                                CornerRadius="18"
                                BackgroundColor="#3B82F6"
                                TextColor="White"
                                Clicked="OnEditarNotaDesdeLista"
                                CommandParameter="{Binding .}" />

                                <Button Text="🗑"
                                FontSize="14"
                                HeightRequest="36"
                                WidthRequest="36"
                                CornerRadius="18"
                                BackgroundColor="#EF4444"
                                TextColor="White"
                                Clicked="OnBorrarNotaDesdeLista"
                                CommandParameter="{Binding .}" />
                            </HorizontalStackLayout>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>


        <!-- Botón flotante para nueva nota -->
        <Button Text="+"
                FontSize="24"
                WidthRequest="60"
                HeightRequest="60"
                CornerRadius="30"
                BackgroundColor="#3B82F6"
                TextColor="White"
                VerticalOptions="End"
                HorizontalOptions="End"
                Margin="10"
                Clicked="OnNuevaNotaClicked"
                Grid.Row="1" />
    </Grid>
</ContentPage>
